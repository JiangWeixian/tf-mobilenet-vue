(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{5:function(e,t){},F1Wv:function(e,t,i){},F5iJ:function(e,t,i){"use strict";var s=i("F1Wv");i.n(s).a},HO1r:function(e,t,i){},RXlY:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-camera"},[i("div",{staticClass:"video-wrapper"},[i("video",{ref:"video",attrs:{autoplay:""}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"canvas-wrapper"},[i("canvas",{ref:"canvas"})])]),e._v(" "),i("div",{staticClass:"panel control-panel"},[i("transition",{attrs:{name:"popup"}},[i("toast",{directives:[{name:"show",rawName:"v-show",value:e.isPredict,expression:"isPredict"}],staticClass:"predict",attrs:{content:"我们找到了 "+e.msg}})],1),e._v(" "),i("a",{staticClass:"btn-play btn-floating btn-large waves-effect waves-dark",on:{click:e._record}},[i("i",{staticClass:"material-icons md-dark md-56"},[e._v("play_arrow")])])],1),e._v(" "),i("transition",{attrs:{name:"record"}},[i("div",{directives:[{name:"show",rawName:"v-show",value:e.isRecord,expression:"isRecord"}],staticClass:"img-container"},[i("div",{staticClass:"img-layer"}),e._v(" "),i("div",{staticClass:"img-wrapper"},[i("img",{ref:"img",attrs:{src:e.imgUrl,alt:"canvas"}})])])])],1)};s._withStripped=!0;var a=i("4d7F"),n=i.n(a),r=i("8WS6"),o=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"toast-wrapper z-depth-3"},[t("p",{staticClass:"toast-content"},[this._v("\n    "+this._s(this.content)+"\n  ")])])};o._withStripped=!0;var c={name:"toast",props:{content:{type:String,required:!0}}},d=(i("muI9"),i("KHd+")),v=Object(d.a)(c,o,[],!1,null,"1e612171",null);v.options.__file="src/components/Base/Toast/Toast.vue";var l={name:"VueCamera",components:{Toast:v.exports},data:function(){return{name:"VueCamera",imgUrl:null,model:null,isRecord:!1,isPredict:!1,msg:""}},watch:{isRecord:function(e,t){var i=this;e?setTimeout(function(){i.isRecord=!1},400):setTimeout(function(){i._predict()},200)},isPredict:function(e,t){var i=this;e&&setTimeout(function(){i.isPredict=!1},600)}},computed:{isPc:function(){var e=navigator.userAgent,t=/(?:Windows Phone)/.test(e),i=/(?:SymbianOS)/.test(e)||t,s=/(?:Android)/.test(e),a=/(?:Firefox)/.test(e),n=(/(?:Chrome|CriOS)/.test(e),/(?:iPad|PlayBook)/.test(e)||s&&!/(?:Mobile)/.test(e)||a&&/(?:Tablet)/.test(e));return!(/(?:iPhone)/.test(e)&&!n||s||i||n)}},mounted:function(){var e=this;this.model=r.load().then(function(e){return n.a.resolve(e)}),this.$nextTick(function(){e._initMedia()})},methods:{_initMedia:function(){this.$refs.video&&(navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,window.URL=window.URL||window.webkitURL||window.mozURL||window.msURL,this._getMedia())},_getMedia:function(){var e=this;if(navigator.getUserMedia){var t=[];navigator.mediaDevices.enumerateDevices().then(function(e){e.forEach(function(e){"videoinput"===e.kind&&t.push(e.deviceId)})}).then(function(){navigator.getUserMedia({video:{deviceId:{exact:e.isPc||1==t.length?t[0]:t[1]}},audio:!0},e._successCallback,e._errorCallback)})}else console.log("Native device media streaming (getUserMedia) not supported in this browser.")},_successCallback:function(e){void 0!==this.$refs.video.mozSrcObject?this.$refs.video.mozSrcObject=e:this.$refs.video.src=window.URL&&window.URL.createObjectURL(e)||e},_errorCallback:function(e){console.log(e)},_record:function(){this.$refs.canvas.getContext("2d").drawImage(this.$refs.video,0,0,300,150),this.imgUrl=this.$refs.canvas.toDataURL("image/png"),this.isRecord=!0},_predict:function(){var e=this;this.model.then(function(t){console.log("done"),t.classify(e.$refs.img).then(function(t){e.msg=t[0].className.split(",")[0],e.isPredict=!0})})}}},u=(i("F5iJ"),Object(d.a)(l,s,[],!1,null,"411eb971",null));u.options.__file="src/components/Camera/VueCamera.vue",t.default=u.exports},muI9:function(e,t,i){"use strict";var s=i("HO1r");i.n(s).a}}]);